@model IEnumerable<FamilyAuto.Models.DateSoldGroup>

@{
    ViewBag.Title = "Statistics";
}

<script src="~/Scripts/jchartfx.system.js"></script>
<script src="~/Scripts/jchartfx.coreVector.js"></script>
<script src="~/Scripts/jchartfx.userInterface.js"></script>
<link href="~/Styles/jchartfx.userInterface.css" rel="stylesheet" />
<link href="~/Styles/Attributes/jchartfx.attributes.css" rel="stylesheet" />
<link href="~/Styles/Palettes/jchartfx.palette.css" rel="stylesheet" />

<h2>Statistics</h2>
<br />

<h4>@Html.ActionLink("Vehicles Sold: " + (string)ViewBag.VehiclesSold, "Index", new { Controller = "Vehicle" }, new { @class = "" })</h4>

<h4>@Html.ActionLink("Vehicles On Sale: " + (string)ViewBag.VehiclesNotSold, "Index", new { Controller = "SoldVehicles" }, new { @class = "" })</h4>

<h4>@Html.ActionLink("Registered Customers: " + (string)ViewBag.RegisteredCustomers, "Index", new { Controller = "User" }, new { @class = "" })</h4>

<h4>@Html.ActionLink("Non-Registered Customers: " + (string)ViewBag.NonRegisteredCustomers, "Index", new { Controller = "User" }, new { @class = "" })</h4>

@*@foreach (string m in ViewBag.Months)*@
@*@foreach (var m in ViewBag.SalesPerMonth)
    {
        <p>@m</p>
    }*@

@{ 
    //var jss = new System.Web.Script.Serialization.JavaScriptSerializer();
    //var salesData = jss.Serialize(ViewBag.SalesPerMonth);

    var salesData = Json.Encode(ViewBag.SalesPerMonth);
}

@*<table class="table table-striped">
    <tr>
        <th>
            Date Sold
        </th>
        <th>
            Count
        </th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.DateSold)
            </td>
            <td>
                @item.SoldCount
            </td>
        </tr>
    }
</table>*@

<div id="ChartDiv" style="width:600px;height:400px;display:inline-block"></div>

<script type="text/javascript" language="javascript">

    var chart1;
    $(document).ready(function ($) {

        chart1 = new cfx.Chart();

        chart1.getData().setSeries(2);

        chart1.getAxisY().setMin(1);

        chart1.getAxisY().setMax(20);

        var series1 = chart1.getSeries().getItem(0);

        var series2 = chart1.getSeries().getItem(1);

        series1.setGallery(cfx.Gallery.Lines);

        series2.setGallery(cfx.Gallery.Bar);

        var data = JSON.parse('@Html.Raw(salesData)');

        chart1.setDataSource(data);

        var divHolder = document.getElementById('ChartDiv');

        chart1.create(divHolder);

    })
</script>
